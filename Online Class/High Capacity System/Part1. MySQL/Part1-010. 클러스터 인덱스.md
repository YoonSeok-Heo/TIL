# 클러스터 인덱스

**클러스터 인덱스 3줄요약**
1. 클러스터 인덱스는 데이터 위치를 결정하는 키 값이다.
2. MySQL의 PK는 클러스터 인덱스다.
3. MySQL에서 PK를 제외한 모든 인덱스는 PK를 가지고있다.

## 클러스터 인덱스는 데이터위치를 결정

![image](https://user-images.githubusercontent.com/113662725/218301770-6cd15ac6-f8dd-45d5-9f8c-56eede9e16d1.png)

- 클러스터 키 4번이 Insert가 된다고 할 때 3번과 5번사이에 들어가게 된다. 5번은 다음 데이터로 밀리고 그 사이로 들어가게 된다.
- 4번 밑에 데이터가 한 건 밖에 없어 데이터의 이동이 한 건 이였으나. 데이터가 많아지면 밀리는 값이 늘어나게 된다.
- **스터 키 순서에 따라서 데이터 저장 위치가 변경된다!**
  - 클러스터 키 삽입/갱신시에 성능이슈 발생

## MySQL PK는 클러스터 인덱스를 사용한다.
- PK순서에 따라서 데이터 저장 위치가 변경된다.
  - PK키 삽입/갱신시에 성능이슈 발생

### PK로 Auto Increment vs UUID 확인해보기!

## MySQL에서 PK를 제외한 모든 인덱스는 PK를 가지고 있다.
- PK의 사이즈가 인덱스의 사이즈를 결정
- PK가 인덱스이기 때문에 PK가 인서트되거나 업데이트 되면 PK에 해당하는 데이터 주소가 바뀌게 된다. 인덱스 들이 PK가 아니라 데이터 주소를 가지고 있다면 데이터 순서가 바뀔때 인덱스도 순서가 바뀌니 부하가 더 걸린다. 그래서 실제로 인덱스는 PK를 들고있고 PK의 순서가 바껴도 인덱스에는 영향이 없다.
- 그렇기 때문에 세컨더리 인덱스만으로는 데이터를 찾아갈 수 없다.
  - PK인덱스를 항상 검색해야함

## 클러스터 인덱스의 장점
1. PK를 활용한 검색이 빠름. 특히 범위 검색
2. 세컨더리 인덱스들이 PK를 가지고 있어 커버링에 유리
