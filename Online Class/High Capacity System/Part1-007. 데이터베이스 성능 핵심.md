# 007. 데이터베이스 성능 핵심

## 디스크 접근을 줄이자.!


### 컴퓨터의 구조
![image](https://user-images.githubusercontent.com/113662725/216994849-844daa5f-a27b-41e5-bfcd-e7eb99efc909.png)
- CPU가 데이터를 가지고 오거나 저장하기 위해서는 I/O입출력 버스를 이용해야한다.
- 위 이미지에서 데이터 저장이 가능한 부분은 **메모리와 디스크**이다.

### 메모리와 디스크의 차이
||메모리|디스크
---|---|---
속도|빠름|느림
영속성|전원이 공급되지 않으면 휘발|영속성이 있음
가격|비쌈|저렴함
- 메모리는 속도가 빠르나 영속성이 없어 결국 데이터는 디스크에 저장해야한다.
- 결국 데이터베이스 성능의 핵심은 디스크I/O를 최소화 하는 것

### 디스크 접근을 줄이는 방법
- 메모리에 올라온 데이터로 최대한 요청을 처리
  - 메모리 캐시 히트율을 높이는 것
  - 쓰기도 곧 바로 디스크에 쓰지 않고 메모리에 쓴다.(메모리 유실을 고려해 **WAL(Write Ahead Log)**를 사용

![image](https://user-images.githubusercontent.com/113662725/216998026-bffa2eb6-82bb-49c9-92e8-d5adad10dac4.png)
- 순차적인 I/O발생
  - 대부분의 트랜잭션은 무작위하게 Write가 발생
  - 이를 지연시켜 랜덤 I/O횟수를 줄이는 대신 순차적 I/O를 발생시켜 정합성 유지

#### WAL(Write Ahead Log)
추가


## 결론
데이터베이스 성능의 핵심은 디스크 랜덤 I/O를 최소화 하는것이다.




