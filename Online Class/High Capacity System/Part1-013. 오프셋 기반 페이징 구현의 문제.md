# 페이지네이션 최적화

## 오프셋 기반 페이징 구현의 문제

마지막 페이지를 구하기 위해 전체 갯수를 알아야한다.

데이터 사이즈가 많아지면 전체 데이터를 구헤오는데 부하가 늘어난다.

### 예제

![image](https://user-images.githubusercontent.com/113662725/224740132-a4991c3b-241c-4ef0-ae85-f05dca185988.png)

![image](https://user-images.githubusercontent.com/113662725/224740779-fe5ca81e-39d8-4446-82af-faf687f69ebe.png)
- 4번 Offset부터 시작하기 위해서 0 ~ 3까지 데이터를 다시 읽어야한다.

![image](https://user-images.githubusercontent.com/113662725/224741069-e306cd5c-15cf-42b6-872a-2f19d2a2f0c8.png)
- 그리고 나서 4번 Offset부터 2개의 데이터를 반환한다.

#### 문제점
- 실제로 반환하는 데이터는 2개인데 2개의 데이터를 반환하기 위해 4개의 데이터를 읽고 버림...
- 위와 같은 이유로 Offset사이즈가 커지면 커질수록 버려지는 데이터가 많아진다.
- 데이터가 커질수록 이 방법은 효율이 떨어진다.
- 불필요한 데이터 조회..


## 커서 기반 페이징

![image](https://user-images.githubusercontent.com/113662725/224742369-ccf485f1-b1f1-4bae-b033-869765563c70.png)
1. 클라이언트가 요청할 때 키를 넘겨준다.
2. DB에서는 키값부터 읽기 때문에 불필요한 데이터 조회를 없엔다.
3. 서버에서 데이터를 넘길때 키값도 함께 넘겨준다.
4. 다음번 조회에서는 넘겨받은 키값부터 다시 조회하게된다.

- 커서 기반 페이지는 키를 기준으로 데이터 조회를 최소화한다.
- 커서 기반 페이징은 전체 데이터를 조회 하지 않기 때문에 마지막페이지가 있는 UI를 구현하기 힘듦.

