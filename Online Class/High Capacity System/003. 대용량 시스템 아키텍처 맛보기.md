# 대용량 시스템 아키텍처 맛보기

- 대용량 처리와 대용량 트래픽 처리의 핵심은 한개의 서버로 감당하기 힘든 부하를 다수의 서버나 데이터베이스로 해결하는 과정이다.

- 여러대의 서버와 데이터베이스를 마치 한대가 돌아가는 것처럼 하기 위한 기법들이나 최적화 기법들이 사용된다.

- 또한 서비스들은 언제든지 사용할 수 있도록 24시간 무중단이라는 특징을 가지고 있다.

- 대용량 시스템의 경우 많은 팀들이 협업하며 서비스를 만들기 때문에 여러가지 마이크로 서비스들이 복잡한 의존관계를 가진다.

### 대용량 서비스가 어려운 이유 (정리)
1. 하나의 서버로 감당하기 힘들어 여러개의 서버 또는 DB를 사용함
2. 여러개의 서버에서 유입되는 데이터의 일관성을 보장할 수 있어야함
3. 코드 한줄이 데이터에 미치는 영향범위가 굉장히 커짐
4. 여러 서비스들이 얽혀있어, 시스템 복잡도가 상당히 높음

## 대용량 시스템이 가져야하는 조건

### 고가용성
- 언제든 시스템이 사용 가능해야함

### 확장성
- 시스템이 비대해짐에 따라 증가하는 트래픽에 대응할 수 있어야한다.

### 관측가능성
- 문제가 생겼을 때 빠르게 인지할 수 있어야하고, 문제의 범위를 최소화 할 수 있어야한다.(어느 지점에서 문제가 생겼는지 확인할 수 있어야한다.)


## 대용량 시스템의 발전과정

1. 클라이언트 -> 서버 -> DB
  - 사용자의 수가 적을 때 이와같은 구조도 적절한 응답시간을 가질 수 있음

2. 서버의 Scale-Out
  - 사용자 수가 늘어나 서버에 부하가 가면 Scale-Out을 진행 할 수 있다.
  - 한대의 서버가 받는 부하를 줄인다.
  - 로드밸런스 기능을 적절히 사용하여 각 서버별로 받는 부담을 최적화한다.(로드밸런스의경우 따로 정리할 예정)

3. 캐시(정리해야겠다.)
  - 로컬 캐시 : 각 서버 메모리에 데이터를 캐싱
  - 글로벌 캐시 : Redis서버와 같이 여러 서버들이 하나의 서버에 캐시를 공유하도록 한다.
  - 캐시 주기와 만료정책을 어떻게 할 것인가 정하는것도 중요

4. 대외기관과의 연동 (메일이나 API)
  - 비동기 큐를 사용(Kafka, RabbitMQ)
  - 서버 내에서 쓰레드 풀을 이용해 비동기큐를 사용
 
