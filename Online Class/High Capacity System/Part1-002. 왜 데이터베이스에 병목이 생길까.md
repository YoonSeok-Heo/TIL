# 왜 데이터베이스에 병목이 생길까?

우선 Scale-Up과 Scale-Out의 개념을 알아야한다. [**Scale-Up/Scale-Out 클릭**](https://github.com/YoonSeok-Heo/TIL/blob/main/Server%20Architecture/Scale-up%20Scale-out.md)


## 서버 확장
Scale-Up보다 Scale-Out을 주로 사용하기에 Scale-Out위주로 설명하겠다.
<br><br>

![image](https://user-images.githubusercontent.com/113662725/209162207-9fdb7b82-de87-43e6-8caa-44242ff2a245.png)

1. 사용자가 증가하게 되면서 Scale-Out의 방식을 사용해 서버를 확장시킨다면 위 이미지와 같이 여러대의 서버가 존재하게 된다.

2. 사용자는 같은 입력에 대해서 항상 같은 결과값을 반환받아야 하는데, 만약 접근하는 서버마다 다른 결과를 반환하게 된다면 해당 서버는 매우 불안정한 서버라고 할 수 있다. 

3. 때문에 여러대의 서버들은 위 이미지와 같이 한대의 데이터베이스를 바라보게 된다.

---- 

## 데이터 베이스의 Scale-Out

Scale-Out의 가장 큰 전제조건은 상태가 없어야한다는 점이다. 하지만 데이터베이스는 데이터라는 상태를 관리하기 때문에 서버보다 Scale-Out에는 훨씬 많은 비용이 필요하다.

**데이터베이스의 Scle-Out에는 다양한 기법이 있으니 나중에 정리해서 링크를 첨부하겠다,!!**


-----

## 정리

- 현대 서버 아키텍처는 상태관리를 데이터베이스에 위임. 서버는 상태관리를 하지 않는 방향으로 발전(서버의 Scale-Out이 자유로워진다.)
- 데이터 베이스는 Scale-Out이 쉽지 않고 비용이 많이 들어 병목현상의 원인이 된다.

### 추가
- 서버의 경우 메모리의 데이터를 참조하는데에 반해 데이터 베이스는 디스크의 데이터에 접근하기 때문에 서버보다 처리속도가 늦어진다.(메모리를 사용하는 데이터베이스도 있다.)
- 서버와 데이터베이스 사이에는 네트워크 구간이 존재하기 때문에 네트워크 상황에 따라 달리질 수 있다. 
